---
layout: default
title: On Generative Algorithms - Differential Line
---

<h1 class="fade">{{ site.generative-title }}</h1>

<div class="sec" id="differential-line">

<h2>Differential Line</h2>

<a class="ghlink"
href="https://github.com/inconvergent/differential-line">Differential Line on
Github</a>

<p>Differential is an algorithm that I had been wanting to make for a long
time.  Eventually the solution just came to me, and I managed to get it
working. What I wanted to do was create a system that behaved similarly to
surfaces in nature that fold in on themselves.  For instance the way walnuts
do, as well as the layers of cabbage, (I won't go into how much time I've spent
googling images of red cabbages split in half), our intestines and several
leaves and flower petals. And probably several other things.</p>

<p>First I tried using a method that was based on the <a
  href="https://en.wikipedia.org/wiki/Koch_snowflake">Koch Snowflake</a>
fractal. But with randomized growth instead of symmetric and regular as in the
fractal. I never got this working, and I quickly gave up. Some time later (six
months give or take), however, I realized that I could introduce new nodes, as
when the Koch Snowflake "grows", but I had to have the nodes move relative
to each other as well. That way they could adjust their positions dynamically.
Somewhat like pearls on a string. That way they can keep a comfortable distance
to other nodes (pearls).</p>

<img src="/img/generative/differential-line3-uniform.gif"
alt="differential line ani" title="differential line uniform configuration"
/>

<img src="/img/generative/differential-line2.gif" alt="differential
line ani" title="differential line curvature configuration" />

<p>The algorithm goes like this: First we start with a set of connected nodes
in some shape (circles or lines are good). Then we randomly introduce new nodes
between pairs of existing nodes.  For iteration the nodes will try to optimize
their positions. They want to be close, but not too close, to their two
neighbors. At the same time they want to be as far away as possible from all
other nodes within a certain distance. Note that there is no actual collision
detection involved here.</p>

<p>There are a number of factors that will affect the behaviour of this system.
One is how frequently we introduce new nodes. Another is the maximum distance
within which nodes will avoid each other. And the most interesting one (in my
opinion) is how we choose where to insert new nodes. We can do it uniformly, as
in the image above, or we can prioritize places where the curve bends more
sharply, as below. The difference is not entirely easy to pinpoint in these
animations, but it gets very noticeable on large simulations. </p>

<img src="/img/generative/differential-3k-small.png" alt="differential
line" title="differential line still" />
<blockquote>This simulation uses the curvature based insertion method and took
  about 40 hours to complete.</blockquote>

<p>Another way of getting interesting results from this system is by painting
the position of the curve for each step in time. The visual and textural
results are dramatically different, but it is easy to recognize the same
characteristics.</p>

<img src="/img/generative/differential-line4-paint.gif" alt="differential
line ani" title="differential line paint" />

<img src="/img/generative/differential-line5-paint.gif" alt="differential
line ani" title="differential line paint" />

<a class="paginator next" href="../differential-mesh">Next: Differential Mesh</a>
<a class="paginator prev" href="../linetrace">Previous: Linetrace</a>

</div>

